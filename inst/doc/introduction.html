<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Marian Eberl" />

<meta name="date" content="2020-10-26" />

<title>Introduction to the msSPChelpR package - from long dataset to SIR analyses</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to the msSPChelpR package -
from long dataset to SIR analyses</h1>
<h4 class="author">Marian Eberl</h4>
<h4 class="date">26 October 2020</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette explains how to use the functions:</p>
<ul>
<li><code>calc_futime()</code> to calculate follow-up time from index
event until next event, death or end of follow-up date</li>
<li><code>pat_status()</code> to determine patient status at end of
follow-up</li>
<li><code>renumber_time_id()</code> to calculate a consecutive index of
events per case ID</li>
<li><code>reshape_long()</code> to transpose dataset in wide format to
data in long format</li>
<li><code>reshape_wide()</code> to transpose dataset in long format to
data in wide format (the wide format is required for many package
functions)</li>
<li><code>sir_byfutime()</code> to calculate standardized incidence
ratios (SIRs) with custom grouping variables stratified by follow-up
time</li>
<li><code>summarize_sir_results()</code> to summarize detailed SIR
results produced by <code>sir_byfutime()</code></li>
<li><code>vital_status()</code> to determine vital status whether
patient is alive or dead at end of follow-up</li>
</ul>
<p>For some functions there are multiple variants of the same function
using varying frameworks. They give the same results but will differ in
execution time and memory use:</p>
<ul>
<li><a href="https://markfairbanks.github.io/tidytable/"><code>tidytable</code></a>
variants carry the suffix <code>_tt()</code></li>
<li><a href="https://tidyr.tidyverse.org"><code>tidyr</code></a>
variants carry the suffix <code>_tidyr()</code></li>
</ul>
</div>
<div id="recommended-workflows" class="section level1">
<h1>Recommended Workflows</h1>
<div id="wf-calc-fu" class="section level2">
<h2>Calculate follow-up times</h2>
<p>It is recommended to run the following steps in the correct order to
obtain accurate follow-up time calculations</p>
<ol style="list-style-type: decimal">
<li><p><a href="#step-long">Use the long version dataset</a></p></li>
<li><p><a href="#step-filter">Filter all cases</a> in the long version
of the dataset that are relevant for your analysis. Make sure
that:</p></li>
</ol>
<ul>
<li>for each <code>case_id</code> the index event (e.g. First Cancer FC)
is still included and is the one remaining row in the dataset with the
smallest <code>case_id</code> (<code>TUMID3</code> variable for ZfKD
data, and <code>SEQ_NUM</code> for SEER data)</li>
<li>all <code>case_id</code>s might or might not get a countable
incident event (e.g. Second Primary Cancer SPC). This event should be
the second entry per <code>case_id</code> (second smallest
<code>case_id</code>) if it is to be counted</li>
<li>in the long version dataset a <code>count_var</code> should indicate
whether the countable incident event (SPC) has occurred or not. Coded
<code>0</code> for non-occurrence (or not counted event) and
<code>1</code> for a counted incident event.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p><a href="#step-renumber">Renumber filtered long dataset</a>: In
the filter long dataset, you should run the helper function
<code>msSPChelpR::renumber_time_id_dt()</code> (or non-data.table
variant <code>msSPChelpR::renumber_time_id()</code>) that will renumber
all events per <code>case_id</code> and (if step 1 is fulfilled) will
assign each index event with <code>time_var_new = 1</code> and each
second (possibly countable incident event) with
<code>time_var_new = 2</code>. Any SIR related function will only count
the second event, if additionally to <code>time_var_new = 2</code> for
this row also <code>count_var = 1</code> is true.</p></li>
<li><p><a href="#step-reshape-wide">Reshape dataset</a>: Run
<code>msSPChelpR::reshape_wide_dt()</code> or non-data.table-variant
<code>msSPChelpR::reshape_wide()</code>, so that dataset is transposed
to wide format (1 row per <code>case_id</code>, creating variables such
as <code>count_var.2</code>).</p></li>
<li><p><a href="#step-spc">Set flag for Second Primary Cancer
diagnosis</a>: After filtering and reshaping it is essential to set
<code>p_spc</code> again. This variable will be used by later steps of
the analysis.</p></li>
<li><p><a href="#step-pat-status">Determine patient status</a> at a
defined end of follow-up by using the
<code>msSPChelpR::pat_status()</code> function. This date for end of
follow-up must:</p></li>
</ol>
<ul>
<li><p>be in “YYYY-MM-DD” format and is always defined via the
<code>fu_end =</code> parameter</p></li>
<li><p>must precede the end of data collection. E.g. if the last
incident events for the dataset you are using are collected at the end
of 2014, your <code>fu_end</code> must be
<code>fu_end = &quot;2014-12-15&quot;</code> or earlier.</p></li>
<li><p>Based on the newly calculated patient status, you might want to
<a href="#step-filter-pat-status">exclude cases for which patient status
cannot be determined</a></p></li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li><a href="#step-calc-futime">Calculate follow-up time</a> for the
same dataset by using the <code>msSPChelpR::calc_futime()</code>
function and the same <code>fu_end</code> as for step 6. By standard all
functions of the <code>msSPChelpR</code> package require follow-up times
as numeric years.</li>
</ol>
</div>
<div id="calculate-standardized-incidence-ratios-sir" class="section level2">
<h2>Calculate Standardized Incidence Ratios (SIR)</h2>
<p>In order to calculate SIR using the package functions, the following
data structure is needed: * Wide format data <code>wide_df</code> with
one row per patient that has encountered the index event (i.e. diagnosed
with a first primary cancer FC)</p>
<ul>
<li>The dataset <code>wide_df</code> needs to contain the following
variables (columns) per patient (row):
<ul>
<li><code>region_var</code> - variable in df that contains information
on region where case was incident.</li>
<li><code>agegroup_var</code> - variable in df that contains information
on age-group.</li>
<li><code>sex_var</code> - variable in df that contains information on
biological sex.</li>
<li><code>year_var</code> - variable in df that contains information on
year or year-period when case was incident.</li>
<li><code>site_var</code> - variable in df that contains information on
case (count event) diagnosis. Cases are usually the second cancers.
Diagnoses can use any coding system (e.g. ICD) but coding system between
dataset and reference data must be coherent.</li>
<li><code>futime_var</code> - variable in df that contains follow-up
time per person between date of first cancer and any of death, date of
event (case), end of FU date (in years; whatever event comes first). In
case you have not calculated the FU time yet, you can use the workflow
described in the previous <a href="#wf-calc-fu">chapter</a>.</li>
</ul></li>
</ul>
<p>If your data has the required structure, you can calculate and
summarize SIRs with the following two steps:</p>
<ol start="8" style="list-style-type: decimal">
<li><a href="#step-sir-byfutime">Calculate SIR</a> per SPC diagnosis
with age, sex, region, period-specific strata using the
<code>msSPChelpR::sir_byfutime()</code> function. For this calculation
usually a reference dataset is required that defines the population
standard rates. <code>refrates_df</code> must use the same category
coding of age, sex, region, year and cancer_site as
<code>agegroup_var</code>, <code>sex_var</code>,
<code>region_var</code>, <code>year_var</code> and
<code>site_var</code></li>
</ol>
<ul>
<li>The theory behind calculating stratified SIRs is explained in the
chapter on <a href="#theo-sir">basics on SIRs</a></li>
</ul>
<ol start="9" style="list-style-type: decimal">
<li><a href="#step-summarize-sir">Summarize SIR results</a> using the
<code>msSPChelpR::summarize_sir_results()</code> function on the
stratified sir results produced by the previous step.</li>
</ol>
</div>
</div>
<div id="theo-sir" class="section level1">
<h1>Theory behind SIRs</h1>
<p>In the next version of this vignette the theoretical considerations
how SIRs are calculated will be explained in this chapter.</p>
</div>
<div id="examples" class="section level1">
<h1>Examples</h1>
<div id="seer-lung-cancer" class="section level2">
<h2>SEER lung cancer</h2>
<div id="step-long" class="section level3">
<h3>Step 1 - Long dataset</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attache Paket: &#39;dplyr&#39;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Die folgenden Objekte sind maskiert von &#39;package:stats&#39;:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Die folgenden Objekte sind maskiert von &#39;package:base&#39;:</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(msSPChelpR)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Load synthetic dataset of patients with cancer to demonstrate package functions</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;us_second_cancer&quot;</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#This dataset is in long format, so each tumor is a separate row in the data</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>us_second_cancer</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 113,999 x 15</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id SEQ_NUM registry   sex   race  datebirth  t_datediag t_site_icd t_dco</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004        1 SEER Reg ~ Male  White 1926-01-01 1992-07-15 C50        hist~</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100004        2 SEER Reg ~ Male  White 1926-01-01 2004-01-15 C54        hist~</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100004        3 SEER Reg ~ Male  White 1926-01-01 2006-06-15 C34        hist~</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100004        4 SEER Reg ~ Male  White 1926-01-01 2018-06-15 C14        DCO ~</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100034        1 SEER Reg ~ Male  White 1979-01-01 2000-06-15 C50        hist~</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100037        1 SEER Reg ~ Fema~ White 1938-01-01 1996-01-15 C54        hist~</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100038        1 SEER Reg ~ Male  White 1989-01-01 1991-04-15 C50        hist~</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100038        2 SEER Reg ~ Male  White 1989-01-01 2000-03-15 C80        hist~</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100039        1 SEER Reg ~ Fema~ White 1946-01-01 2003-08-15 C50        hist~</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100039        2 SEER Reg ~ Fema~ White 1946-01-01 2011-04-15 C34        hist~</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 113,989 more rows, and 6 more variables: fc_age &lt;int&gt;,</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   datedeath &lt;date&gt;, p_alive &lt;chr&gt;, p_dodmin &lt;date&gt;, fc_agegroup &lt;chr&gt;,</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   t_yeardiag &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="step-filter" class="section level3">
<h3>Step 2 - Filter long dataset</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#filter for lung cancer</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>ids <span class="ot">&lt;-</span> us_second_cancer <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#detect ids with any lung cancer</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(t_site_icd <span class="sc">==</span> <span class="st">&quot;C34&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fake_id) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.vector</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unname</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>filtered_usdata <span class="ot">&lt;-</span> us_second_cancer <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter according to above detected ids with any lung cancer diagnosis</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fake_id <span class="sc">%in%</span> ids) <span class="sc">%&gt;%</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">arrange</span>(fake_id)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>filtered_usdata</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 62,661 x 15</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id SEQ_NUM registry   sex   race  datebirth  t_datediag t_site_icd t_dco</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004        1 SEER Reg ~ Male  White 1926-01-01 1992-07-15 C50        hist~</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100004        2 SEER Reg ~ Male  White 1926-01-01 2004-01-15 C54        hist~</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100004        3 SEER Reg ~ Male  White 1926-01-01 2006-06-15 C34        hist~</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100004        4 SEER Reg ~ Male  White 1926-01-01 2018-06-15 C14        DCO ~</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100039        1 SEER Reg ~ Fema~ White 1946-01-01 2003-08-15 C50        hist~</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100039        2 SEER Reg ~ Fema~ White 1946-01-01 2011-04-15 C34        hist~</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100039        3 SEER Reg ~ Fema~ White 1946-01-01 2018-01-15 C80        hist~</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100073        1 SEER Reg ~ Male  White 1960-01-01 1993-11-15 C44        hist~</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100073        2 SEER Reg ~ Male  White 1960-01-01 2003-12-15 C34        hist~</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100143        1 SEER Reg ~ Male  White 1944-01-01 1992-03-15 C50        hist~</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 62,651 more rows, and 6 more variables: fc_age &lt;int&gt;,</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   datedeath &lt;date&gt;, p_alive &lt;chr&gt;, p_dodmin &lt;date&gt;, fc_agegroup &lt;chr&gt;,</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   t_yeardiag &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="step-renumber" class="section level3">
<h3>Step 3 - Renumber <code>time_id</code></h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>renumbered_usdata <span class="ot">&lt;-</span> filtered_usdata <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">renumber_time_id</span>(<span class="at">new_time_id_var =</span> <span class="st">&quot;t_tumid&quot;</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">dattype =</span> <span class="st">&quot;seer&quot;</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">case_id_var =</span> <span class="st">&quot;fake_id&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>renumbered_usdata <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(fake_id, sex, t_site_icd, t_datediag, t_tumid)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 62,661 x 5</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id sex    t_site_icd t_datediag t_tumid</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;      &lt;date&gt;       &lt;int&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004  Male   C50        1992-07-15       1</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100004  Male   C54        2004-01-15       2</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100004  Male   C34        2006-06-15       3</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100004  Male   C14        2018-06-15       4</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100039  Female C50        2003-08-15       1</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100039  Female C34        2011-04-15       2</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100039  Female C80        2018-01-15       3</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100073  Male   C44        1993-11-15       1</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100073  Male   C34        2003-12-15       2</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100143  Male   C50        1992-03-15       1</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 62,651 more rows</span></span></code></pre></div>
</div>
<div id="step-reshape-wide" class="section level3">
<h3>Step 4 - Reshape to wide dataset</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="ot">&lt;-</span> renumbered_usdata <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reshape_wide_tidyr</span>(<span class="at">case_id_var =</span> <span class="st">&quot;fake_id&quot;</span>, <span class="at">time_id_var =</span> <span class="st">&quot;t_tumid&quot;</span>, <span class="at">timevar_max =</span> <span class="dv">10</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#now the data is in the wide format as required by many package functions. </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#This means, each case is a row and several tumors per case ID are </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#add new columns to the data using the time_id as column name suffix.</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>usdata_wide</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 31,997 x 127</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id SEQ_NUM.1 registry.1            sex.1 race.1 datebirth.1 t_datediag.1</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;      </span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004          1 SEER Reg 20 - Detroi~ Male  White  1926-01-01  1992-07-15  </span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100039          1 SEER Reg 02 - Connec~ Fema~ White  1946-01-01  2003-08-15  </span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100073          1 SEER Reg 01 - San Fr~ Male  White  1960-01-01  1993-11-15  </span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100143          1 SEER Reg 02 - Connec~ Male  White  1944-01-01  1992-03-15  </span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100182          1 SEER Reg 02 - Connec~ Male  Other  1927-01-01  1991-09-15  </span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100197          1 SEER Reg 02 - Connec~ Fema~ White  1945-01-01  2012-06-15  </span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100208          1 SEER Reg 02 - Connec~ Male  White  1970-01-01  2019-11-15  </span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100230          1 SEER Reg 01 - San Fr~ Male  White  1947-01-01  1992-11-15  </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100234          1 SEER Reg 01 - San Fr~ Male  White  1988-01-01  2010-02-15  </span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100266          1 SEER Reg 01 - San Fr~ Fema~ White  1956-01-01  2010-07-15  </span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 31,987 more rows, and 120 more variables: t_site_icd.1 &lt;chr&gt;,</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   t_dco.1 &lt;chr&gt;, fc_age.1 &lt;int&gt;, datedeath.1 &lt;date&gt;, p_alive.1 &lt;chr&gt;,</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   p_dodmin.1 &lt;date&gt;, fc_agegroup.1 &lt;chr&gt;, t_yeardiag.1 &lt;chr&gt;,</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SEQ_NUM.2 &lt;int&gt;, registry.2 &lt;chr&gt;, sex.2 &lt;chr&gt;, race.2 &lt;chr&gt;,</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   datebirth.2 &lt;date&gt;, t_datediag.2 &lt;date&gt;, t_site_icd.2 &lt;chr&gt;, t_dco.2 &lt;chr&gt;,</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   fc_age.2 &lt;int&gt;, datedeath.2 &lt;date&gt;, p_alive.2 &lt;chr&gt;, p_dodmin.2 &lt;date&gt;,</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   fc_agegroup.2 &lt;chr&gt;, t_yeardiag.2 &lt;chr&gt;, SEQ_NUM.3 &lt;int&gt;, ...</span></span></code></pre></div>
</div>
<div id="step-spc" class="section level3">
<h3>Step 5 - Recalculate <code>p_spc</code></h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="ot">&lt;-</span> usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">p_spc =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(t_site_icd<span class="fl">.2</span>)   <span class="sc">~</span> <span class="st">&quot;No SPC&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">!</span><span class="fu">is.na</span>(t_site_icd<span class="fl">.2</span>)           <span class="sc">~</span> <span class="st">&quot;SPC developed&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                         <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#create the same information as numeric variable count_spc</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">count_spc =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(<span class="fu">is.na</span>(t_site_icd<span class="fl">.2</span>)   <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(fake_id, sex<span class="fl">.1</span>, p_spc, count_spc, t_site_icd<span class="fl">.1</span>, </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                 t_datediag<span class="fl">.1</span>, t_site_icd<span class="fl">.2</span>, t_datediag<span class="fl">.2</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 31,997 x 8</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id sex.1  p_spc         count_spc t_site_icd.1 t_datediag.1 t_site_icd.2</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;        &lt;date&gt;       &lt;chr&gt;       </span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004  Male   SPC developed         0 C50          1992-07-15   C54         </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100039  Female SPC developed         0 C50          2003-08-15   C34         </span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100073  Male   SPC developed         0 C44          1993-11-15   C34         </span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100143  Male   SPC developed         0 C50          1992-03-15   C34         </span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100182  Male   SPC developed         0 C18          1991-09-15   C34         </span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100197  Female SPC developed         0 C34          2012-06-15   C50         </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100208  Male   No SPC                1 C34          2019-11-15   &lt;NA&gt;        </span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100230  Male   SPC developed         0 C44          1992-11-15   C34         </span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100234  Male   No SPC                1 C34          2010-02-15   &lt;NA&gt;        </span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100266  Female No SPC                1 C34          2010-07-15   &lt;NA&gt;        </span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 31,987 more rows, and 1 more variable: t_datediag.2 &lt;date&gt;</span></span></code></pre></div>
</div>
<div id="step-pat-status" class="section level3">
<h3>Step 6 - Determine patient status at end of FU</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="ot">&lt;-</span> usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pat_status</span>(., <span class="at">fu_end =</span> <span class="st">&quot;2017-12-31&quot;</span>, <span class="at">dattype =</span> <span class="st">&quot;seer&quot;</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">status_var =</span> <span class="st">&quot;p_status&quot;</span>, <span class="at">life_var =</span> <span class="st">&quot;p_alive.1&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">spc_var =</span> <span class="st">&quot;p_spc&quot;</span>, <span class="at">birthdat_var =</span> <span class="st">&quot;datebirth.1&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">lifedat_var =</span> <span class="st">&quot;datedeath.1&quot;</span>, <span class="at">fcdat_var =</span> <span class="st">&quot;t_datediag.1&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">spcdat_var =</span> <span class="st">&quot;t_datediag.2&quot;</span>, <span class="at">life_stat_alive =</span> <span class="st">&quot;Alive&quot;</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">life_stat_dead =</span> <span class="st">&quot;Dead&quot;</span>, <span class="at">spc_stat_yes =</span> <span class="st">&quot;SPC developed&quot;</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">spc_stat_no =</span> <span class="st">&quot;No SPC&quot;</span>, <span class="at">lifedat_fu_end =</span> <span class="st">&quot;2019-12-31&quot;</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">use_lifedatmin =</span> <span class="cn">FALSE</span>, <span class="at">check =</span> <span class="cn">TRUE</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">as_labelled_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 x 3</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    p_alive.1 p_status                                                          n</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;fct&gt;                                                         &lt;int&gt;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Alive     Patient alive after FC (with or without following SPC after ~  5940</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Alive     Patient alive after SPC                                       11316</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Alive     NA - Patient not born before end of FU                            4</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Alive     NA - Patient did not develop cancer before end of FU            849</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Dead      Patient alive after FC (with or without following SPC after ~   863</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Dead      Patient alive after SPC                                        1360</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Dead      Patient dead after FC                                          6208</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Dead      Patient dead after SPC                                         5325</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Dead      NA - Patient did not develop cancer before end of FU             68</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Dead      NA - Patient date of death is missing                            64</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 x 2</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   p_status                                                                   n</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;                                                                  &lt;int&gt;</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Patient alive after FC (with or without following SPC after end of FU)  6803</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Patient alive after SPC                                                12676</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Patient dead after FC                                                   6208</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Patient dead after SPC                                                  5325</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 NA - Patient not born before end of FU                                     4</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 NA - Patient did not develop cancer before end of FU                     917</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 NA - Patient date of death is missing                                     64</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(fake_id, p_status, p_alive<span class="fl">.1</span>, datedeath<span class="fl">.1</span>, t_site_icd<span class="fl">.1</span>, t_datediag<span class="fl">.1</span>, </span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>                 t_site_icd<span class="fl">.2</span>, t_datediag<span class="fl">.2</span>)</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 31,997 x 8</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id p_status p_alive.1 datedeath.1 t_site_icd.1 t_datediag.1 t_site_icd.2</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;fct&gt;    &lt;chr&gt;     &lt;date&gt;      &lt;chr&gt;        &lt;date&gt;       &lt;chr&gt;       </span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004  Patient~ Alive     NA          C50          1992-07-15   C54         </span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100039  Patient~ Alive     NA          C50          2003-08-15   C34         </span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100073  Patient~ Dead      2005-06-01  C44          1993-11-15   C34         </span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100143  Patient~ Alive     NA          C50          1992-03-15   C34         </span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100182  Patient~ Dead      2007-05-01  C18          1991-09-15   C34         </span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100197  Patient~ Alive     NA          C34          2012-06-15   C50         </span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100208  NA - Pa~ Alive     NA          C34          2019-11-15   &lt;NA&gt;        </span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100230  Patient~ Dead      2008-05-01  C44          1992-11-15   C34         </span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100234  Patient~ Dead      2015-07-01  C34          2010-02-15   &lt;NA&gt;        </span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100266  Patient~ Alive     NA          C34          2010-07-15   &lt;NA&gt;        </span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 31,987 more rows, and 1 more variable: t_datediag.2 &lt;date&gt;</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="co">#alternatively, you can impute the date of death using lifedatmin_var</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pat_status</span>(., <span class="at">fu_end =</span> <span class="st">&quot;2017-12-31&quot;</span>, <span class="at">dattype =</span> <span class="st">&quot;seer&quot;</span>,</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>             <span class="at">status_var =</span> <span class="st">&quot;p_status&quot;</span>, <span class="at">life_var =</span> <span class="st">&quot;p_alive.1&quot;</span>,</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>             <span class="at">spc_var =</span> <span class="st">&quot;p_spc&quot;</span>, <span class="at">birthdat_var =</span> <span class="st">&quot;datebirth.1&quot;</span>,</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>             <span class="at">lifedat_var =</span> <span class="st">&quot;datedeath.1&quot;</span>, <span class="at">fcdat_var =</span> <span class="st">&quot;t_datediag.1&quot;</span>,</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>             <span class="at">spcdat_var =</span> <span class="st">&quot;t_datediag.2&quot;</span>, <span class="at">life_stat_alive =</span> <span class="st">&quot;Alive&quot;</span>,</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>             <span class="at">life_stat_dead =</span> <span class="st">&quot;Dead&quot;</span>, <span class="at">spc_stat_yes =</span> <span class="st">&quot;SPC developed&quot;</span>,</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>             <span class="at">spc_stat_no =</span> <span class="st">&quot;No SPC&quot;</span>, <span class="at">lifedat_fu_end =</span> <span class="st">&quot;2019-12-31&quot;</span>,</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>             <span class="at">use_lifedatmin =</span> <span class="cn">TRUE</span>, <span class="at">lifedatmin_var =</span> <span class="st">&quot;p_dodmin.1&quot;</span>, </span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>             <span class="at">check =</span> <span class="cn">TRUE</span>, <span class="at">as_labelled_factor =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 9 x 3</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   p_alive.1 p_status                                                           n</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;fct&gt;                                                          &lt;int&gt;</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Alive     Patient alive after FC (with or without following SPC after e~  5940</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Alive     Patient alive after SPC                                        11316</span></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Alive     NA - Patient not born before end of FU                             4</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Alive     NA - Patient did not develop cancer before end of FU             849</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Dead      Patient alive after FC (with or without following SPC after e~   867</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Dead      Patient alive after SPC                                         1361</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 Dead      Patient dead after FC                                           6230</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 Dead      Patient dead after SPC                                          5362</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9 Dead      NA - Patient did not develop cancer before end of FU              68</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 x 2</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   p_status                                                                   n</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;                                                                  &lt;int&gt;</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Patient alive after FC (with or without following SPC after end of FU)  6807</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Patient alive after SPC                                                12677</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Patient dead after FC                                                   6230</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Patient dead after SPC                                                  5362</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 NA - Patient not born before end of FU                                     4</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 NA - Patient did not develop cancer before end of FU                     917</span></span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 31,997 x 130</span></span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id SEQ_NUM.1 registry.1            sex.1 race.1 datebirth.1 t_datediag.1</span></span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;      </span></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004          1 SEER Reg 20 - Detroi~ Male  White  1926-01-01  1992-07-15  </span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100039          1 SEER Reg 02 - Connec~ Fema~ White  1946-01-01  2003-08-15  </span></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100073          1 SEER Reg 01 - San Fr~ Male  White  1960-01-01  1993-11-15  </span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100143          1 SEER Reg 02 - Connec~ Male  White  1944-01-01  1992-03-15  </span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100182          1 SEER Reg 02 - Connec~ Male  Other  1927-01-01  1991-09-15  </span></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100197          1 SEER Reg 02 - Connec~ Fema~ White  1945-01-01  2012-06-15  </span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100208          1 SEER Reg 02 - Connec~ Male  White  1970-01-01  2019-11-15  </span></span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100230          1 SEER Reg 01 - San Fr~ Male  White  1947-01-01  1992-11-15  </span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100234          1 SEER Reg 01 - San Fr~ Male  White  1988-01-01  2010-02-15  </span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100266          1 SEER Reg 01 - San Fr~ Fema~ White  1956-01-01  2010-07-15  </span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 31,987 more rows, and 123 more variables: t_site_icd.1 &lt;chr&gt;,</span></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   t_dco.1 &lt;chr&gt;, fc_age.1 &lt;int&gt;, datedeath.1 &lt;date&gt;, p_alive.1 &lt;chr&gt;,</span></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   p_dodmin.1 &lt;date&gt;, fc_agegroup.1 &lt;chr&gt;, t_yeardiag.1 &lt;chr&gt;,</span></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SEQ_NUM.2 &lt;int&gt;, registry.2 &lt;chr&gt;, sex.2 &lt;chr&gt;, race.2 &lt;chr&gt;,</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   datebirth.2 &lt;date&gt;, t_datediag.2 &lt;date&gt;, t_site_icd.2 &lt;chr&gt;, t_dco.2 &lt;chr&gt;,</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   fc_age.2 &lt;int&gt;, datedeath.2 &lt;date&gt;, p_alive.2 &lt;chr&gt;, p_dodmin.2 &lt;date&gt;,</span></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   fc_agegroup.2 &lt;chr&gt;, t_yeardiag.2 &lt;chr&gt;, SEQ_NUM.3 &lt;int&gt;, ...</span></span></code></pre></div>
<div id="step-filter-pat-status" class="section level4">
<h4>Step 6b - Remove patients irrelevant to analysis depending on
status</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="ot">&lt;-</span> usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>p_status <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;NA - Patient not born before end of FU&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">&quot;NA - Patient did not develop cancer before end of FU&quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">&quot;NA - Patient date of death is missing&quot;</span>))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(p_status)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 2</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   p_status                                                                   n</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;                                                                  &lt;int&gt;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Patient alive after FC (with or without following SPC after end of FU)  6803</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Patient alive after SPC                                                12676</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Patient dead after FC                                                   6208</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Patient dead after SPC                                                  5325</span></span></code></pre></div>
</div>
</div>
<div id="step-calc-futime" class="section level3">
<h3>Step 7 - Calculate FU time</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="ot">&lt;-</span> usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">calc_futime</span>(., <span class="at">futime_var_new =</span> <span class="st">&quot;p_futimeyrs&quot;</span>, <span class="at">fu_end =</span> <span class="st">&quot;2017-12-31&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">dattype =</span> <span class="st">&quot;seer&quot;</span>, <span class="at">time_unit =</span> <span class="st">&quot;years&quot;</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">lifedat_var =</span> <span class="st">&quot;datedeath.1&quot;</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">fcdat_var =</span> <span class="st">&quot;t_datediag.1&quot;</span>, <span class="at">spcdat_var =</span> <span class="st">&quot;t_datediag.2&quot;</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 5</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   p_status                       mean_futime min_futime max_futime median_futime</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;                                &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Patient alive after FC (with ~        9.58     0.0438       27.0          8.29</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Patient alive after SPC               8.69     0            26.9          7.50</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Patient dead after FC                 8.54     0            25.8          7.47</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Patient dead after SPC                6.33     0            26.5          5.08</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(fake_id, p_status, p_futimeyrs, p_alive<span class="fl">.1</span>, datedeath<span class="fl">.1</span>, t_datediag<span class="fl">.1</span>, t_datediag<span class="fl">.2</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 31,012 x 7</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fake_id p_status  p_futimeyrs p_alive.1 datedeath.1 t_datediag.1 t_datediag.2</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;fct&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;date&gt;      &lt;date&gt;       &lt;date&gt;      </span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 100004  Patient ~       11.5  Alive     NA          1992-07-15   2004-01-15  </span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 100039  Patient ~        7.67 Alive     NA          2003-08-15   2011-04-15  </span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 100073  Patient ~       10.1  Dead      2005-06-01  1993-11-15   2003-12-15  </span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 100143  Patient ~        3.33 Alive     NA          1992-03-15   1995-07-15  </span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 100182  Patient ~        7.08 Dead      2007-05-01  1991-09-15   1998-10-15  </span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 100197  Patient ~        4.83 Alive     NA          2012-06-15   2017-04-15  </span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 100230  Patient ~       11.0  Dead      2008-05-01  1992-11-15   2003-11-15  </span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 100234  Patient ~        5.37 Dead      2015-07-01  2010-02-15   NA          </span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 100266  Patient ~        7.46 Alive     NA          2010-07-15   NA          </span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100274  Patient ~        2.38 Dead      2006-06-01  2004-01-15   NA          </span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 31,002 more rows</span></span></code></pre></div>
</div>
<div id="step-sir-byfutime" class="section level3">
<h3>Step 8 - Calculate SIR</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sircalc_results <span class="ot">&lt;-</span> usdata_wide <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sir_byfutime</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">dattype =</span> <span class="st">&quot;seer&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ybreak_vars =</span> <span class="fu">c</span>(<span class="st">&quot;race.1&quot;</span>, <span class="st">&quot;t_dco.1&quot;</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">xbreak_var =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">futime_breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>, <span class="dv">2</span><span class="sc">/</span><span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="cn">Inf</span>),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_var =</span> <span class="st">&quot;count_spc&quot;</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">refrates_df =</span> us_refrates_icd2,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_total_row =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_total_fu =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">region_var =</span> <span class="st">&quot;registry.1&quot;</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_var =</span> <span class="st">&quot;fc_agegroup.1&quot;</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex_var =</span> <span class="st">&quot;sex.1&quot;</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">year_var =</span> <span class="st">&quot;t_yeardiag.1&quot;</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_var =</span> <span class="st">&quot;race.1&quot;</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">site_var =</span> <span class="st">&quot;t_site_icd.1&quot;</span>, <span class="co">#using grouping by second cancer incidence</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">futime_var =</span> <span class="st">&quot;p_futimeyrs&quot;</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.05</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [INFO Cases 0 PYARs] There are conflicts where strata with 0 follow-up time have data in observed.</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; i 40 strata are affected.</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - This might be caused by cases where SPC occured at the same day as first cancer.</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - You can check this by excluding all cases from wide_df, where date of first diagnosis is equal.</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Check attribute `problems_not_empty` of results to see what strata are affected.</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  </span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [INFO Unexpected Cases] There are observed cases in the results file that do not occur in the refrates_df.</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; i 2682 strata are affected.</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A possible explanation can be:</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - DCO cases or</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - diagnosis of second cancer occured in different time period than first cancer</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Check attribute `notes_refcases` of results to see what strata are affected.</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>sircalc_results <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">100</span>)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tidytable: 421,296 x 22</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     age    region sex   race  year  yvar_name yvar_label fu_time t_site observed</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C14           0</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   2 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C18           0</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   3 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C34           0</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   4 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C44           0</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   5 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C50           0</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   6 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C54           0</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   7 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C64           0</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   8 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    to 1 m~ C80           0</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   9 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C14           0</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  10 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C18           0</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  11 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C34           0</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  12 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C44           0</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  13 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C50           0</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  14 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C54           0</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  15 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C64           0</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  16 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.0833~ C80           0</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  17 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C14           0</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  18 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C18           0</span></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  19 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C34           0</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  20 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C44           0</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  21 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C50           0</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  22 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C54           0</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  23 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C64           0</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  24 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    0.167-~ C80           0</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  25 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C14           0</span></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  26 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C18           0</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  27 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C34           0</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  28 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C44           0</span></span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  29 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C50           0</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  30 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C54           0</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  31 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C64           0</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  32 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    1-5 ye~ C80           0</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  33 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C14           0</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  34 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C18           0</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  35 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C34           1</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  36 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C44           0</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  37 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C50           0</span></span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  38 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C54           0</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  39 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C64           0</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  40 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    5-10 y~ C80           0</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  41 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C14           0</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  42 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C18           0</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  43 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C34           1</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  44 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C44           0</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  45 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C50           0</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  46 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C54           0</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  47 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C64           0</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  48 00 - ~ SEER ~ Fema~ Black 1990~ total_var Overall    Total ~ C80           0</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  49 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C14           0</span></span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  50 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C18           0</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  51 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C34           0</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  52 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C44           0</span></span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  53 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C50           0</span></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  54 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C54           0</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  55 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C64           0</span></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  56 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      to 1 m~ C80           0</span></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  57 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C14           0</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  58 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C18           0</span></span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  59 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C34           0</span></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  60 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C44           0</span></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  61 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C50           0</span></span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  62 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C54           0</span></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  63 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C64           0</span></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  64 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.0833~ C80           0</span></span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  65 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C14           0</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  66 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C18           0</span></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  67 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C34           0</span></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  68 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C44           0</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  69 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C50           0</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  70 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C54           0</span></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  71 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C64           0</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  72 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      0.167-~ C80           0</span></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  73 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C14           0</span></span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  74 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C18           0</span></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  75 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C34           0</span></span>
<span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  76 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C44           0</span></span>
<span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  77 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C50           0</span></span>
<span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  78 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C54           0</span></span>
<span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  79 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C64           0</span></span>
<span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  80 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      1-5 ye~ C80           0</span></span>
<span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  81 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C14           0</span></span>
<span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  82 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C18           0</span></span>
<span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  83 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C34           1</span></span>
<span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  84 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C44           0</span></span>
<span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  85 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C50           0</span></span>
<span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  86 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C54           0</span></span>
<span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  87 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C64           0</span></span>
<span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  88 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      5-10 y~ C80           0</span></span>
<span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  89 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C14           0</span></span>
<span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  90 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C18           0</span></span>
<span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  91 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C34           1</span></span>
<span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  92 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C44           0</span></span>
<span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  93 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C50           0</span></span>
<span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  94 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C54           0</span></span>
<span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  95 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C64           0</span></span>
<span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  96 00 - ~ SEER ~ Fema~ Black 1990~ race.1    Black      Total ~ C80           0</span></span>
<span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  97 00 - ~ SEER ~ Fema~ Black 1990~ t_dco.1   histology  to 1 m~ C14           0</span></span>
<span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  98 00 - ~ SEER ~ Fema~ Black 1990~ t_dco.1   histology  to 1 m~ C18           0</span></span>
<span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  99 00 - ~ SEER ~ Fema~ Black 1990~ t_dco.1   histology  to 1 m~ C34           0</span></span>
<span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 100 00 - ~ SEER ~ Fema~ Black 1990~ t_dco.1   histology  to 1 m~ C44           0</span></span>
<span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ... with 421,196 more rows, and 12 more variables: expected &lt;dbl&gt;, sir &lt;dbl&gt;,</span></span>
<span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   sir_lci &lt;dbl&gt;, sir_uci &lt;dbl&gt;, pyar &lt;dbl&gt;, n_base &lt;dbl&gt;,</span></span>
<span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ref_inc_cases &lt;dbl&gt;, ref_population_pyar &lt;dbl&gt;, ref_inc_crude_rate &lt;dbl&gt;,</span></span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   fu_time_sort &lt;int&gt;, yvar_sort &lt;int&gt;, warning &lt;chr&gt;</span></span></code></pre></div>
</div>
<div id="step-summarize-sir" class="section level3">
<h3>Step 9 - Summarize SIR results</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The summarize function is versatile. Her for example the summary by</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>sircalc_results <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#summarize results across region, age, year and t_site</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize_sir_results</span>(.,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">summarize_groups =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;race&quot;</span>),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">summarize_site =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">output =</span> <span class="st">&quot;long&quot;</span>,  <span class="at">output_information =</span> <span class="st">&quot;minimal&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">add_total_row =</span> <span class="st">&quot;only&quot;</span>,  <span class="at">add_total_fu =</span> <span class="st">&quot;no&quot;</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">collapse_ci =</span> <span class="cn">FALSE</span>,  <span class="at">shorten_total_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fubreak_var_name =</span> <span class="st">&quot;fu_time&quot;</span>, <span class="at">ybreak_var_name =</span> <span class="st">&quot;yvar_name&quot;</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">xbreak_var_name =</span> <span class="st">&quot;none&quot;</span>, <span class="at">site_var_name =</span> <span class="st">&quot;t_site&quot;</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">alpha =</span> <span class="fl">0.05</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                        ) <span class="sc">%&gt;%</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>region, <span class="sc">-</span>age, <span class="sc">-</span>year, <span class="sc">-</span>race, <span class="sc">-</span>sex, <span class="sc">-</span>yvar_name)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: The results file `sir_df` contains observed cases in i_observed that do not occur in the refrates_df (ref_inc_cases).</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Therefore calculation of the variables n_base and ref_population_pyar is ambiguous.</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; We take the first value of each variable. Expect small inconsistencies in the calculation of n_base, ref_population_pyar and ref_inc_crude_rate across strata.</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! If you want to know more, please check the `warnings` column of `sir_df`.</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tidytable: 7 x 8</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   yvar_label fu_time          fu_time_sort t_site observed expected   sir sir_ci</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;                   &lt;int&gt; &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; </span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Overall    to 1 month                  1 Total       327     20.6 15.9  14.23~</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Overall    0.0833-0.167 ye~            2 Total        80     20.4  3.92 3.11 ~</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Overall    0.167-1 years               3 Total       724    196.   3.69 3.43 ~</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Overall    1-5 years                   4 Total      2998    760.   3.95 3.81 ~</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Overall    5-10 years                  5 Total      3089    605.   5.1  4.92 ~</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Overall    10+ years                   6 Total      4241    500.   8.49 8.23 ~</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 Overall    Total 0 to Inf ~            7 Total     11459   2102.   5.45 5.35 ~</span></span></code></pre></div>
</div>
</div>
<div id="built-with" class="section level2">
<h2>Built with</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; R version 4.1.3 (2022-03-10)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Platform: x86_64-w64-mingw32/x64 (64-bit)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Running under: Windows 10 x64 (build 19044)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Matrix products: default</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; locale:</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] LC_COLLATE=C                    LC_CTYPE=German_Germany.1252   </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] LC_TIME=German_Germany.1252    </span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attached base packages:</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; other attached packages:</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] msSPChelpR_0.9.0 magrittr_2.0.3   dplyr_1.0.9     </span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] pillar_1.7.0      bslib_0.3.1       compiler_4.1.3    jquerylib_0.1.4  </span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] prettyunits_1.1.1 progress_1.2.2    forcats_0.5.1     tools_4.1.3      </span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] digest_0.6.29     jsonlite_1.8.0    lubridate_1.8.0   evaluate_0.15    </span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] lifecycle_1.0.1   tibble_3.1.7      pkgconfig_2.0.3   rlang_1.0.2      </span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] cli_3.3.0         DBI_1.1.2         rstudioapi_0.13   yaml_2.3.5       </span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] haven_2.5.0       xfun_0.31         fastmap_1.1.0     stringr_1.4.0    </span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] knitr_1.39        hms_1.1.1         generics_0.1.2    vctrs_0.4.1      </span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [29] sass_0.4.1        sjlabelled_1.2.0  tidyselect_1.1.2  data.table_1.14.2</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [33] snakecase_0.11.0  glue_1.6.2        R6_2.5.1          fansi_1.0.3      </span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [37] rmarkdown_2.14    purrr_0.3.4       tidyr_1.2.0       ellipsis_0.3.2   </span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [41] htmltools_0.5.2   insight_0.17.1    assertthat_0.2.1  tidytable_0.8.0  </span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [45] utf8_1.2.2        stringi_1.7.6     crayon_1.5.1</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
